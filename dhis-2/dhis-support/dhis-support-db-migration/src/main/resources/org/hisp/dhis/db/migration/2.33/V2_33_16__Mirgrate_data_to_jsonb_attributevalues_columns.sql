update dataelement de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join dataelementattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.dataelementid = de.dataelementid ), ','), '}},{', '},'), ''), NULL)::json);
update dataset de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join datasetattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.datasetid = de.datasetid ), ','), '}},{', '},'), ''), NULL)::json);
update userinfo de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join userattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.userinfoid = de.userinfoid ), ','), '}},{', '},'), ''), NULL)::json);
update usergroup de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join usergroupattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.usergroupid = de.usergroupid ), ','), '}},{', '},'), ''), NULL)::json);
update maplegendset de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join legendsetattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.legendsetid = de.maplegendsetid ), ','), '}},{', '},'), ''), NULL)::json);
update optionvalue de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join optionattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.optionvalueid = de.optionvalueid ), ','), '}},{', '},'), ''), NULL)::json);
update optionset de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join optionsetattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.optionsetid = de.optionsetid ), ','), '}},{', '},'), ''), NULL)::json);
update programindicator de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join programindicatorattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.programindicatorid = de.programindicatorid ), ','), '}},{', '},'), ''), NULL)::json);
update sqlview de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join sqlviewattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.sqlviewid = de.sqlviewid ), ','), '}},{', '},'), ''), NULL)::json);
update constant de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join constantattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.constantid = de.constantid ), ','), '}},{', '},'), ''), NULL)::json);
update document de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join documentattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.documentid = de.documentid ), ','), '}},{', '},'), ''), NULL)::json);
update indicator de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join indicatorattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.indicatorid = de.indicatorid ), ','), '}},{', '},'), ''), NULL)::json);
update indicatorgroup de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join indicatorgroupattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.indicatorgroupid = de.indicatorgroupid ), ','), '}},{', '},'), ''), NULL)::json);
update dataelementgroupset de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join dataelementgroupsetattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.dataelementgroupsetid = de.dataelementgroupsetid ), ','), '}},{', '},'), ''), NULL)::json);
update dataelementgroup de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join dataelementgroupattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.dataelementgroupid = de.dataelementgroupid ), ','), '}},{', '},'), ''), NULL)::json);
update orgunitgroupset de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join orgunitgroupsetattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.orgunitgroupsetid = de.orgunitgroupsetid ), ','), '}},{', '},'), ''), NULL)::json);
update orgunitgroup de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join orgunitgroupattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.orgunitgroupid = de.orgunitgroupid ), ','), '}},{', '},'), ''), NULL)::json);
update organisationunit de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join organisationunitattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.organisationunitid = de.organisationunitid ), ','), '}},{', '},'), ''), NULL)::json);
update categoryoptioncombo de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join categoryoptioncomboattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.categoryoptioncomboid = de.categoryoptioncomboid ), ','), '}},{', '},'), ''), NULL)::json);
update validationrule de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join validationruleattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.validationruleid = de.validationruleid ), ','), '}},{', '},'), ''), NULL)::json);
update validationrulegroup de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join validationrulegroupattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.validationrulegroupid = de.validationrulegroupid ), ','), '}},{', '},'), ''), NULL)::json);
update categoryoptiongroupset de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join categoryoptiongroupsetattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.categoryoptiongroupsetid = de.categoryoptiongroupsetid ), ','), '}},{', '},'), ''), NULL)::json);
update dataelementcategoryoption de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join dataelementcategoryoptionattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.categoryoptionid = de.categoryoptionid ), ','), '}},{', '},'), ''), NULL)::json);
update categoryoptiongroup de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join categoryoptiongroupattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.categoryoptiongroupid = de.categoryoptiongroupid ), ','), '}},{', '},'), ''), NULL)::json);
update dataelementcategory de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join categoryattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.categoryid = de.categoryid ), ','), '}},{', '},'), ''), NULL)::json);
update program de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join programattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.programid = de.programid ), ','), '}},{', '},'), ''), NULL)::json);
update programstage de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join programstageattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.programstageid = de.programstageid ), ','), '}},{', '},'), ''), NULL)::json);
update trackedentityattribute de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join trackedentityattributeattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.trackedentityattributeid = de.trackedentityattributeid ), ','), '}},{', '},'), ''), NULL)::json);
update trackedentitytype de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join trackedentitytypeattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.trackedentitytypeid = de.trackedentitytypeid ), ','), '}},{', '},'), ''), NULL)::json);
update section de set attributevalues = to_jsonb(coalesce(nullif(replace(array_to_string(array( select jsonb_build_object( attr.uid, jsonb_build_object( 'value', av.value, 'attribute', jsonb_build_object( 'id', attr.uid ) ) ) from attributevalue av inner join sectionattributevalues deav on av.attributevalueid = deav.attributevalueid inner join attribute attr on av.attributeid = attr.attributeid where deav.sectionid = de.sectionid ), ','), '}},{', '},'), ''), NULL)::json);


update dataelement  set attributeValues = '{}'::jsonb where attributeValues is null;
update dataset set attributeValues = '{}'::jsonb where attributeValues is null;
update userinfo set attributeValues = '{}'::jsonb where attributeValues is null;
update usergroup set attributeValues = '{}'::jsonb where attributeValues is null;
update maplegendset set attributeValues = '{}'::jsonb where attributeValues is null;
update optionvalue set attributeValues = '{}'::jsonb where attributeValues is null;
update optionset set attributeValues = '{}'::jsonb where attributeValues is null;
update programindicator set attributeValues = '{}'::jsonb where attributeValues is null;
update sqlview set attributeValues = '{}'::jsonb where attributeValues is null;
update constant set attributeValues = '{}'::jsonb where attributeValues is null;
update document set attributeValues = '{}'::jsonb where attributeValues is null;
update indicator set attributeValues = '{}'::jsonb where attributeValues is null;
update indicatorgroup set attributeValues = '{}'::jsonb where attributeValues is null;
update dataelementgroupset set attributeValues = '{}'::jsonb where attributeValues is null;
update dataelementgroup set attributeValues = '{}'::jsonb where attributeValues is null;
update orgunitgroupset set attributeValues = '{}'::jsonb where attributeValues is null;
update orgunitgroup set attributeValues = '{}'::jsonb where attributeValues is null;
update organisationunit set attributeValues = '{}'::jsonb where attributeValues is null;
update categoryoptioncombo set attributeValues = '{}'::jsonb where attributeValues is null;
update validationrule set attributeValues = '{}'::jsonb where attributeValues is null;
update validationrulegroup set attributeValues = '{}'::jsonb where attributeValues is null;
update categoryoptiongroupset set attributeValues = '{}'::jsonb where attributeValues is null;
update dataelementcategoryoption set attributeValues = '{}'::jsonb where attributeValues is null;
update categoryoptiongroup set attributeValues = '{}'::jsonb where attributeValues is null;
update dataelementcategory set attributeValues = '{}'::jsonb where attributeValues is null;
update program set attributeValues = '{}'::jsonb where attributeValues is null;
update programstage set attributeValues = '{}'::jsonb where attributeValues is null;
update trackedentityattribute set attributeValues = '{}'::jsonb where attributeValues is null;
update trackedentitytype set attributeValues = '{}'::jsonb where attributeValues is null;
update section set attributeValues = '{}'::jsonb where attributeValues is null;